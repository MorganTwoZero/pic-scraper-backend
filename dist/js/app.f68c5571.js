(function(){"use strict";var t={9366:function(t,e,n){var a=n(9242),o=n(1020),r=n(5417),i=n(3396),s=n(6265),l=n.n(s),c=n(7139),p=n(4870);const u=(0,o.Q_)({id:"auth",state:()=>({lastUpdate:null}),persist:!0,getters:{LastUpdate:t=>t.lastUpdate},actions:{async lastUpdateSetter(){l().get("update/last_update").then((t=>{this.lastUpdate=new Date(t.data).toLocaleTimeString("ru")}))}}});var d=n(2483);n(7658);const _={key:0};var v={__name:"LikeButton",props:{post_link:{type:String,required:!0}},setup(t){const e=t,n=e.post_link.includes("twitter.com");function a(t){t.preventDefault(),l().get("/like",{params:{post_link:e.post_link}}),t.target.innerText="Liked",t.target.blur(),t.target.disabled=!0,t.target.classList.add("btn-success")}return(t,e)=>(0,p.SU)(n)?((0,i.wg)(),(0,i.iD)("div",_,[(0,i._)("button",{onClick:a,class:"btn btn-primary"},"Like")])):(0,i.kq)("",!0)}};const f=v;var k=f;const g=["href"],m=["src"],h={class:"counter_wrapper"},b={class:"images_count"},w={class:"author"},y=["href"],U=["src"];var L={__name:"PostsComponent",props:{post:{type:Object,required:!0}},setup(t){const e=t;function n(t){t.post.preview_link=t.post.post_link.replace("net","sbs")+".jpg"}function a(t){t.post.clipboard_link=t.post.preview_link,t.post.preview_link=`${{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_BACKEND_URL}/lofter?lofter_link=`+t.post.preview_link.slice(0,t.post.preview_link.search("imageView")-1)+"&preview=true",t.post.author_profile_image=`${{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_BACKEND_URL}/lofter?lofter_link=`+t.post.author_profile_image.slice(0,t.post.author_profile_image.search("imageView")-1)}const o=(0,i.Fl)((()=>new Date(e.post.created).toLocaleTimeString("ru")));function r(t){t.preventDefault();let n="";n=e.post.post_link.startsWith("https://twitter.com/")?`<${e.post.post_link}> ${e.post.preview_link}?name=orig`:e.post.post_link.startsWith("https://www.pixiv.net")?e.post.post_link.replace("net","sbs"):-1!=e.post.post_link.search("lofter")?`${e.post.post_link} ${e.post.clipboard_link.replace(/\?.*/,"")}`:`<${e.post.post_link}> ${e.post.preview_link.replace(/\?.*/,"")}`,navigator.clipboard.writeText(n)}return(0,i.wF)((()=>{e.post.post_link.startsWith("https://www.pixiv.net")&&n(e),-1!=e.post.post_link.search("lofter")&&a(e)})),(t,n)=>((0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("a",{onClick:r,class:"image",href:e.post.post_link},[(0,i._)("img",{class:"preview_link",src:e.post.preview_link},null,8,m),(0,i._)("div",h,[(0,i._)("div",b,(0,c.zw)(e.post.images_number),1)])],8,g),(0,i._)("div",w,[(0,i._)("a",{href:e.post.author_link},[(0,i._)("img",{src:e.post.author_profile_image},null,8,U),(0,i.Uk)(" "+(0,c.zw)(e.post.author),1)],8,y),(0,i.Uk)(" "+(0,c.zw)((0,p.SU)(o)),1)]),(0,i._)("div",null,[(0,i.Wm)(k,{post_link:e.post.post_link},null,8,["post_link"])])],64))}},O=n(89);const D=(0,O.Z)(L,[["__scopeId","data-v-2836b3f4"]]);var S=D;const E=t=>((0,i.dD)("data-v-47d75d37"),t=t(),(0,i.Cn)(),t),P=E((()=>(0,i._)("div",{id:"loading"},[(0,i._)("svg",{viewBox:"25 25 50 50"},[(0,i._)("circle",{cx:"50",cy:"50",r:"20"})])],-1)));var C={__name:"PostsView",setup(t){let e=(0,p.iH)([]),n=1;function a(){const t=new IntersectionObserver(o);t.observe(document.querySelector("#loading"))}function o(){l().get(N.currentRoute.value.fullPath+"?page="+n).then((t=>{e.value.push(...t.data),n++}))}return(0,i.bv)((()=>{a()})),(t,n)=>((0,i.wg)(),(0,i.iD)(i.HY,null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,p.SU)(e),(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.post_link},[(0,i.Wm)(S,{post:t},null,8,["post"])])))),128)),P],64))}};const T=(0,O.Z)(C,[["__scopeId","data-v-47d75d37"]]);var x=T;const A=[{path:"/honkai",name:"honkai",component:x,meta:{title:"Honkai"}},{path:"/myfeed",name:"myfeed",component:x,meta:{title:"My feed"}},{path:"/:catchAll(.*)",redirect:"/honkai"}],j=(0,d.p7)({history:(0,d.PO)(),routes:A}),B="DEFAULT_TITLE";j.afterEach((t=>{document.title=t.meta.title||B}));var N=j;const R=t=>((0,i.dD)("data-v-1e004e51"),t=t(),(0,i.Cn)(),t),V={class:"container"},$=R((()=>(0,i._)("a",{class:"navbar-brand",href:"/"},"Honkai Pic Scraper",-1))),H=R((()=>(0,i._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarCollapse","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,i._)("span",{class:"navbar-toggler-icon"})],-1))),W={class:"collapse navbar-collapse",id:"navbarCollapse"},q={class:"navbar-nav me-auto mb-2 mb-md-0"},I={class:"nav-item"},M={class:"nav-item"},Z={class:"nav-item"},z={class:"nav-item nav-link"};var F={__name:"NavBar",setup(t){const e=u(),{LastUpdate:n}=(0,o.Jk)(e);function a(t){t.target.getAttribute("href")==N.currentRoute.value.fullPath&&location.reload()}function r(){const t=document.querySelector(".navbar-collapse");t.classList.contains("show")&&t.classList.remove("show")}return(t,e)=>{const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("nav",{onClick:r,class:"navbar navbar-expand-sm navbar-light fixed-top bg-light"},[(0,i._)("div",V,[$,H,(0,i._)("div",W,[(0,i._)("ul",q,[(0,i._)("li",I,[(0,i.Wm)(o,{onClick:a,class:"nav-link",to:"/honkai"},{default:(0,i.w5)((()=>[(0,i.Uk)("Honkai")])),_:1})]),(0,i._)("li",M,[(0,i.Wm)(o,{onClick:a,class:"nav-link",to:"/myfeed"},{default:(0,i.w5)((()=>[(0,i.Uk)("My feed")])),_:1})]),(0,i._)("li",Z,[(0,i._)("a",{onClick:e[0]||(e[0]=e=>t.$emit("update")),class:"nav-link"},"Update")]),(0,i._)("li",z," Last update: "+(0,c.zw)((0,p.SU)(n)),1)])])])])}}};const K=(0,O.Z)(F,[["__scopeId","data-v-1e004e51"]]);var Y=K,G=n(4677);const J={class:"main container"};var Q={__name:"App",setup(t){const e=(0,G.pm)(),n=u();function a(){e.info("Update requested"),l().get("/update").then((t=>{e(t.data.message,{duration:1e3})})).catch((t=>{console.log(t),e.error(t,{duration:1e3})}))}return(0,i.Xn)((()=>{n.lastUpdateSetter()})),(t,e)=>{const n=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(Y,{onUpdate:a}),(0,i._)("div",J,[((0,i.wg)(),(0,i.j4)(n,{key:t.$route.fullPath}))])],64)}}};const X=Q;var tt=X,et=n(2166);n(343);l().defaults.withCredentials=!0,l().defaults.baseURL={NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_BACKEND_URL;const nt=(0,a.ri)(tt),at=(0,o.WB)();at.use(r.ZP),nt.use(at),nt.use(N,et.Lt),nt.use(G.ZP,{position:G.Vr.BOTTOM_RIGHT}),nt.mount("#app")}},e={};function n(a){var o=e[a];if(void 0!==o)return o.exports;var r=e[a]={exports:{}};return t[a](r,r.exports,n),r.exports}n.m=t,function(){var t=[];n.O=function(e,a,o,r){if(!a){var i=1/0;for(p=0;p<t.length;p++){a=t[p][0],o=t[p][1],r=t[p][2];for(var s=!0,l=0;l<a.length;l++)(!1&r||i>=r)&&Object.keys(n.O).every((function(t){return n.O[t](a[l])}))?a.splice(l--,1):(s=!1,r<i&&(i=r));if(s){t.splice(p--,1);var c=o();void 0!==c&&(e=c)}}return e}r=r||0;for(var p=t.length;p>0&&t[p-1][2]>r;p--)t[p]=t[p-1];t[p]=[a,o,r]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,a){var o,r,i=a[0],s=a[1],l=a[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(l)var p=l(n)}for(e&&e(a);c<i.length;c++)r=i[c],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(p)},a=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(9366)}));a=n.O(a)})();
//# sourceMappingURL=app.f68c5571.js.map